# Домашнее задание для Яндекс ШРИ-2020. CI server part 1.

# настоящее

1. Переделал репозиторий после прошлого review. Стало лучше.
2. Тестов написал мало, потому что очень долго разбирался. Засомневался что программирование это вобще для меня. Но разобрался. Поэтому выбрал комплексные интеграционные + тест на сложный redux async action.
3. Искренне не понимаю тетсирования snapshot'ами.
4. Ключ теперь храниться в .env
5. В корне репозитория - сервер. В `./web` приложение React

## Для запуска

```bash
npm i && cd web && npm i && cd ..
```

Перед тестами, для подготовки хранилища:
```bash
npm run preflight 
```

Для запуска unit-тестов
```bash
npm run test:unit 
```

Для запуска интеграционных тестов:

- в отдельном терминале запустить сервер для приложения React
```bash
npm run start-ci-server 
```

- в отдельном терминале запустить приложение React
```bash
npm run start-cra 
```

- в отдельном терминале запустить selenium
```bash
npm run start-selemium
```

- в отдельном терминале запустить hermione
```bash
npm run test:integration
```

# прошлое

1. Запускается по `MYAPIKEY=%TOKEN% node index.js`

- проверки на отсутсвие токена нет.
- запуститься сервер на localhost:3000 и будет писать в консоль важные вещи.
- ответы от нашего api уходят клиенту.

2. Что сделано:

- есть простенькая очередь для запуска сборок. Список сборок опрашивается каждые
  10000 мс.
- реализован, но не используется простой лог-файл для хранения статусов
  клонирования репозиториев.
- обработки ошибок почти нет, просто плюемся ими в клиента. Плохо, надо
  делать.
- основной посыл "обалдеть, но оно работает". В заметку "изучить, исправить, сделать лучше"
  записаны тонны пунктов.
- Обилие TODO в коде оставленно для общего понимания.
